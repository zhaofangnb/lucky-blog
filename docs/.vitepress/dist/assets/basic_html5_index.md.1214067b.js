import{_ as s,c as a,o as n,d as l}from"./app.008430f5.js";const C=JSON.parse('{"title":"HTML5 新特性","description":"","frontmatter":{},"headers":[{"level":2,"title":"一、什么是 HTML5？","slug":"一、什么是-html5","link":"#一、什么是-html5","children":[]},{"level":2,"title":"二、HTML5 - 新特性","slug":"二、html5-新特性","link":"#二、html5-新特性","children":[{"level":3,"title":"2.1 新的语义/结构元素","slug":"_2-1-新的语义-结构元素","link":"#_2-1-新的语义-结构元素","children":[]},{"level":3,"title":"2.2 增强型表单","slug":"_2-2-增强型表单","link":"#_2-2-增强型表单","children":[]},{"level":3,"title":"2.3 视频和音频","slug":"_2-3-视频和音频","link":"#_2-3-视频和音频","children":[]},{"level":3,"title":"2.4 Canvas绘图","slug":"_2-4-canvas绘图","link":"#_2-4-canvas绘图","children":[]},{"level":3,"title":"2.5 SVG绘图","slug":"_2-5-svg绘图","link":"#_2-5-svg绘图","children":[]},{"level":3,"title":"2.6 地理定位","slug":"_2-6-地理定位","link":"#_2-6-地理定位","children":[]},{"level":3,"title":"2.7 拖放API","slug":"_2-7-拖放api","link":"#_2-7-拖放api","children":[]},{"level":3,"title":"2.8 WebWorker","slug":"_2-8-webworker","link":"#_2-8-webworker","children":[]},{"level":3,"title":"2.9 WebStorage","slug":"_2-9-webstorage","link":"#_2-9-webstorage","children":[]},{"level":3,"title":"2.10 WebSocket","slug":"_2-10-websocket","link":"#_2-10-websocket","children":[]}]}],"relativePath":"basic/html5/index.md","lastUpdated":null}'),o={name:"basic/html5/index.md"},p=l(`<h1 id="html5-新特性" tabindex="-1">HTML5 新特性 <a class="header-anchor" href="#html5-新特性" aria-hidden="true">#</a></h1><h2 id="一、什么是-html5" tabindex="-1">一、什么是 HTML5？ <a class="header-anchor" href="#一、什么是-html5" aria-hidden="true">#</a></h2><p><code> HTML5 是最新的 HTML 标准。</code></p><p><code> HTML5 是专门为承载丰富的 web 内容而设计的，并且无需额外插件。</code></p><p><code> HTML5 拥有新的语义、图形以及多媒体元素。</code></p><p><code>HTML5 提供的新元素和新的 API 简化了 web 应用程序的搭建</code></p><p><code> HTML5 是跨平台的，被设计为在不同类型的硬件（PC、平板、手机、电视机等等）之上运行。</code></p><h2 id="二、html5-新特性" tabindex="-1">二、<a href="https://juejin.cn/post/6844903829679390728#heading-1" target="_blank" rel="noreferrer">HTML5 - 新特性</a> <a class="header-anchor" href="#二、html5-新特性" aria-hidden="true">#</a></h2><pre><code>1. 新的语义/结构元素
2. 增强型表单
3. 视频和音频
4. Cavas绘图
5. SVG绘图
6. 地理定位
7. 拖放API
8. WebWorker
9. WebStroage
10. WebSocket
</code></pre><h3 id="_2-1-新的语义-结构元素" tabindex="-1">2.1 新的语义/结构元素 <a class="header-anchor" href="#_2-1-新的语义-结构元素" aria-hidden="true">#</a></h3><pre><code>新的语义标签如&lt;header&gt;, &lt;footer&gt;, &lt;main&gt;, &lt;section&gt;, &lt;article&gt;, &lt;aside&gt;, &lt;nav&gt;等
语义化标签使得页面的内容结构化，见名知义，有利于SEO。
</code></pre><h3 id="_2-2-增强型表单" tabindex="-1">2.2 增强型表单 <a class="header-anchor" href="#_2-2-增强型表单" aria-hidden="true">#</a></h3><pre><code>HTML5 增加了多个新的输入类型:
</code></pre><table><thead><tr><th>输入类型</th><th>描述</th></tr></thead><tbody><tr><td><code>color</code></td><td>从一个颜色选择器选择一个颜色</td></tr><tr><td><code>date</code></td><td>从一个日期选择器一个选择日期</td></tr><tr><td><code>datetime</code></td><td>允许用户选择日期和时间(有时区)</td></tr><tr><td><code>datetime-local</code></td><td>允许用户选择日期和时间(无时区)</td></tr><tr><td><code>email</code></td><td>一个包含e-mail地址的输入域</td></tr><tr><td><code>month</code></td><td>选择月份</td></tr><tr><td><code>time</code></td><td>选择时间</td></tr><tr><td><code>number</code></td><td>数值的输入域</td></tr><tr><td><code>range</code></td><td>包含一定范围内的值的输入字段,浏览器显示为滑块控件</td></tr><tr><td><code>search</code></td><td>搜索域</td></tr><tr><td><code>tel</code></td><td>输入电话号码字段</td></tr><tr><td><code>url</code></td><td>url地址的输入域</td></tr><tr><td><code>week</code></td><td>选择周和年</td></tr></tbody></table><pre><code>新增的输入限制(表单属性)有：
</code></pre><table><thead><tr><th>属性</th><th>描述</th></tr></thead><tbody><tr><td><code>placeholder</code></td><td>输入框默认提示</td></tr><tr><td><code>required </code></td><td>boolean值， 要求输入域不能为空</td></tr><tr><td><code>pattern</code></td><td>描述了一个正则表达式用于验证input元素的值</td></tr><tr><td><code>min和max</code></td><td>设置元素的最小值和最大值</td></tr><tr><td><code>step</code></td><td>规定输入字段的合法数字间隔</td></tr><tr><td><code>autofocus</code></td><td>boolean值， 表单域自动获得焦点</td></tr><tr><td><code>multiple</code></td><td>boolean值，input元素可选择多个值</td></tr></tbody></table><p>拓展：</p><ul><li><a href="https://blog.csdn.net/Bruce__taotao/article/details/134554829" target="_blank" rel="noreferrer">el-input限制输入整数分析</a></li><li><a href="https://blog.csdn.net/Shids_/article/details/131193306" target="_blank" rel="noreferrer">你不知道的HTML属性</a></li><li><a href="https://mp.weixin.qq.com/s?__biz=MjM5MDA2MTI1MA==&amp;mid=2649121937&amp;idx=3&amp;sn=919b62282444fbb6add5bca32849c64d&amp;chksm=be58433c892fca2a90788fbc215b8c80d04169405317e0d3c1ba5aff17c6b532777140e74b41&amp;scene=27" target="_blank" rel="noreferrer">24 个鲜为人知的 HTML 属性</a></li><li><a href="https://www.w3school.com.cn/tags/tag_input.asp" target="_blank" rel="noreferrer">HTML input</a></li></ul><h3 id="_2-3-视频和音频" tabindex="-1">2.3 视频和音频 <a class="header-anchor" href="#_2-3-视频和音频" aria-hidden="true">#</a></h3><p>新的媒介元素：</p><table><thead><tr><th>属性</th><th>描述</th></tr></thead><tbody><tr><td><code>&lt;audio&gt;</code></td><td>定义声音或音乐内容</td></tr><tr><td><code>&lt;video&gt;</code></td><td>定义视频或影片内容</td></tr><tr><td><code>&lt;embed&gt;</code></td><td>定义外部应用程序的容器(比如插件)</td></tr><tr><td><code>&lt;source&gt;</code></td><td>定义<code>&lt;audio&gt;</code>和<code>&lt;video&gt;</code>的来源</td></tr><tr><td><code>&lt;track&gt;</code></td><td>定义<code>&lt;audio&gt;</code>和<code>&lt;video&gt;</code>的轨道</td></tr></tbody></table><p><code>&lt;audio&gt;</code>元素允许使用多个<code>&lt;source&gt;</code>元素。<br><code>&lt;source&gt;</code>元素可以链接不同的音频文件，浏览器将使用第一个支持的音频文件。<br><code>&lt;audio&gt;</code>元素目前支持三种音频格式文件：mp3、wav、ogg<br><code>controls</code>属性供添加播放、暂停和音量控件<br><br></p><p><code>&lt;video&gt;</code>元素支持多个<code>&lt;source&gt;</code>元素。<br><code>&lt;source&gt;</code>元素可以链接不同的视频文件，浏览器将使用第一个支持的视频文件。<br><code>&lt;video&gt;</code>元素目前支持三种视频格式文件：mp4、webm、ogg<br><code>controls</code> 提供了播放、暂停和音量控件来控制视频。也可以使用dom操作来控制视频的播放暂停，如<code>play()</code>和<code>pause()</code>方法。</p><h3 id="_2-4-canvas绘图" tabindex="-1">2.4 Canvas绘图 <a class="header-anchor" href="#_2-4-canvas绘图" aria-hidden="true">#</a></h3><h4 id="canvas图形" tabindex="-1">Canvas图形 <a class="header-anchor" href="#canvas图形" aria-hidden="true">#</a></h4><ol><li>创建一个画布，一个画布在网页中是一个矩阵，默认没有边框和内容。</li></ol><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">canvas</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">myCanvas</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">width</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">200</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">height</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">100</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">style</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">border: 1px solid #000000;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">canvas</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><ol start="2"><li>使用js来绘制图像</li></ol><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> c </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getElementById</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">myCanvas</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> ctx </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> c</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getContext</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">2d</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)  </span><span style="color:#676E95;font-style:italic;">// 内建的HTML对象</span></span>
<span class="line"><span style="color:#A6ACCD;">    ctx</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">fillStyle </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">#ff0000</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">// 设置填充色</span></span>
<span class="line"><span style="color:#A6ACCD;">    ctx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fillRect</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">150</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">75</span><span style="color:#A6ACCD;">) </span><span style="color:#676E95;font-style:italic;">// 绘制矩形</span></span>
<span class="line"></span></code></pre></div><h4 id="canvas路径" tabindex="-1">Canvas路径 <a class="header-anchor" href="#canvas路径" aria-hidden="true">#</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> c </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getElementById</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">myCanvas</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> ctx </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> c</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getContent</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">2d</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">ctx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">moveTo</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">)  </span><span style="color:#676E95;font-style:italic;">// 定义线条开始坐标</span></span>
<span class="line"><span style="color:#A6ACCD;">ctx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">lineTo</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">200</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">100</span><span style="color:#A6ACCD;">) </span><span style="color:#676E95;font-style:italic;">// 定义线条结束坐标</span></span>
<span class="line"><span style="color:#A6ACCD;">ctx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stroke</span><span style="color:#A6ACCD;">()   </span><span style="color:#676E95;font-style:italic;">// 绘制线条</span></span>
<span class="line"></span></code></pre></div><h4 id="canvas文本" tabindex="-1">Canvas文本 <a class="header-anchor" href="#canvas文本" aria-hidden="true">#</a></h4><p>fillText(text, x, y) 在 canvas 上绘制<code>实心</code>的文本<br> strokeText(text, x, y) 在 canvas 上绘制<code>空心</code>的文本</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> c </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getElementById</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">myCanvas</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> ctx </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> c</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getContent</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">2d</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 使用 &quot;Arial&quot; 字体在画布上绘制一个高 30px 的文字（实心）</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ctx.font = &quot;30px Arial&quot; </span></span>
<span class="line"><span style="color:#A6ACCD;">ctx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fillText</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Hello World</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">50</span><span style="color:#A6ACCD;">)  </span><span style="color:#676E95;font-style:italic;">// text, x, y</span></span>
<span class="line"></span></code></pre></div><h4 id="canvas渐变" tabindex="-1">Canvas渐变 <a class="header-anchor" href="#canvas渐变" aria-hidden="true">#</a></h4><p>渐变可以填充在矩形、圆形、线条、文本等，设置渐变的两种方式：<br></p><ol><li>createLinearGradient(x,y,x1,y1) - 创建线条渐变</li><li>createRadialGradient(x,y,r,x1,y1,r1) - 创建一个径向/圆渐变</li></ol><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 使用渐变填充矩形</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> c </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getElementById</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">myCanvas</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> ctx </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> c</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getContext</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">2d</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// Create gradient</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> grd </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ctx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createLinearGradient</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">200</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">grd</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addColorStop</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">red</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 指定颜色停止，参数使用坐标来描述，可以是0至1</span></span>
<span class="line"><span style="color:#A6ACCD;">grd</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addColorStop</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">white</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">ctx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fillRect</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">150</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">80</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h4 id="canvas图像" tabindex="-1">Canvas图像 <a class="header-anchor" href="#canvas图像" aria-hidden="true">#</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 把一幅画像放置到画布上， 使用drawImage(image, x, y) </span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> c </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getElementById</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">muCanvas</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> ctx </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> c</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getContent</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2d</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> img </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getElementById</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">image</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">) </span></span>
<span class="line"><span style="color:#A6ACCD;">ctx</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">drawImage</span><span style="color:#A6ACCD;">(img</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><h3 id="_2-5-svg绘图" tabindex="-1">2.5 SVG绘图 <a class="header-anchor" href="#_2-5-svg绘图" aria-hidden="true">#</a></h3><p>SVG是指可伸缩的矢量图形</p><h4 id="svg与canvas的区别" tabindex="-1">SVG与Canvas的区别 <a class="header-anchor" href="#svg与canvas的区别" aria-hidden="true">#</a></h4><p>SVG是一种使用XML描述2D图形的语言<br> Canvas是通过JS来绘制2D图形</p><p>SVG 基于 XML，这意味着 SVG DOM 中的每个元素都是可用的。您可以为某个元素附加 JavaScript 事件处理器。</p><p>在 SVG 中，每个被绘制的图形均被视为对象。如果 SVG 对象的属性发生变化，那么浏览器能够自动重现图形。</p><p>Canvas 是逐像素进行渲染的。在 canvas 中，一旦图形被绘制完成，它就不会继续得到浏览器的关注。如果其位置发生变化，那么整个场景也需要重新绘制，包括任何或许已被图形覆盖的对象。</p><h3 id="_2-6-地理定位" tabindex="-1">2.6 地理定位 <a class="header-anchor" href="#_2-6-地理定位" aria-hidden="true">#</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">window</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">navigator</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">geolocation  </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#FFCB6B;">getCurrentPosition</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">fn</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 用于获取当前的位置数据</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#FFCB6B;">watchPosition</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">fn</span><span style="color:#F07178;">  </span><span style="color:#676E95;font-style:italic;">// 监视用户位置的改变</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#FFCB6B;">clearWatch</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">fn</span><span style="color:#F07178;">  </span><span style="color:#676E95;font-style:italic;">// 清除定位监视</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>获取用户定位信息:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">navigator</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">geolocation </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">pos</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">用户定位数据获取成功</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)　　　　</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">arguments</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;">　　　　</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">定位时间：</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">pos</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">timestamp</span><span style="color:#F07178;">)　　　　</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">经度：</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">pos</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">coords</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">longitude</span><span style="color:#F07178;">)　　　　</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">纬度：</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">pos</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">coords</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">latitude</span><span style="color:#F07178;">)　　　　</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">海拔：</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">pos</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">coords</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">altitude</span><span style="color:#F07178;">)　　　　</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">速度：</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">pos</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">coords</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">speed</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="_2-7-拖放api" tabindex="-1">2.7 拖放API <a class="header-anchor" href="#_2-7-拖放api" aria-hidden="true">#</a></h3><p>在 HTML5 中，拖放是标准的一部分，任何元素都能够拖放。</p><p>拖放的过程分为源对象和目标对象。源对象是指你即将拖动元素，而目标对象则是指拖动之后要放置的目标位置。</p><h4 id="拖放的源对象-可能发生移动-可以触发的事件-3个" tabindex="-1">拖放的源对象（可能发生移动）可以触发的事件-3个 <a class="header-anchor" href="#拖放的源对象-可能发生移动-可以触发的事件-3个" aria-hidden="true">#</a></h4><p>dragstart: 拖动开始</p><p>drag : 拖动中</p><p>dragend: 拖动结束</p><h4 id="拖放的目标对象-不会发生移动-可以触发的事件-4个" tabindex="-1">拖放的目标对象（不会发生移动）可以触发的事件 -4个 <a class="header-anchor" href="#拖放的目标对象-不会发生移动-可以触发的事件-4个" aria-hidden="true">#</a></h4><p>dragenter : 拖动着进入</p><p>dragover: 拖动着悬停</p><p>dragleave: 拖动着离开</p><p>drop: 释放</p><h4 id="datatransfer-用于数据传递的-拖拉机-对象" tabindex="-1">dataTransfer：用于数据传递的“拖拉机”对象 <a class="header-anchor" href="#datatransfer-用于数据传递的-拖拉机-对象" aria-hidden="true">#</a></h4><p>在<code>拖动源对象事件</code>中使用<code>e.dataTransfer</code>属性保存数据</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">dataTransfer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setData</span><span style="color:#A6ACCD;">( k</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> v )</span></span>
<span class="line"></span></code></pre></div><p>在<code>拖动目标对象事件</code>中使用<code>e.dataTransfer</code>属性读取数据</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> value </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">dataTransfer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getData</span><span style="color:#A6ACCD;">( k )</span></span>
<span class="line"></span></code></pre></div><h3 id="_2-8-webworker" tabindex="-1">2.8 WebWorker <a class="header-anchor" href="#_2-8-webworker" aria-hidden="true">#</a></h3><p>当在 HTML 页面中执行脚本时，页面的状态是不可响应的，直到脚本已完成。</p><p><code>web worker</code> 是运行在后台的 JavaScript，独立于其他脚本，不会影响页面的性能。您可以继续做任何愿意做的事情：点击、选取内容等等，而此时 web worker 在后台运行。</p><p>首先检测浏览器是否支持 Web Worker</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">&lt;!</span><span style="color:#F07178;">DOCTYPE</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">p</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">Count numbers: </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">output</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">result</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">output</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">p</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">onclick</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#82AAFF;">startWorker</span><span style="color:#C3E88D;">()</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">Start Worker</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">onclick</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#82AAFF;">stopWorker</span><span style="color:#C3E88D;">()</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">Stop Worker</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">br</span><span style="color:#89DDFF;">&gt;&lt;</span><span style="color:#F07178;">br</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> w</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">startWorker</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">typeof</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">Worker</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">undefined</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">typeof</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">w</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">undefined</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#A6ACCD;">w</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Worker</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">demo_workers.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#A6ACCD;">w</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">onmessage</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">event</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getElementById</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">result</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">innerHTML</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">event</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">data</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getElementById</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">result</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">innerHTML</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Sorry, your browser does not support Web Workers...</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">stopWorker</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">w</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">terminate</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// demo_workers.js</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;">  i </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">timeCount</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#89DDFF;">++</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">postMessage</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">setTimeout</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">timeCount</span><span style="color:#F07178;">() </span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">500</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#82AAFF;">timeCount</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"></span></code></pre></div><h3 id="_2-9-webstorage" tabindex="-1">2.9 WebStorage <a class="header-anchor" href="#_2-9-webstorage" aria-hidden="true">#</a></h3><p>浏览器缓存 <code>cookie</code> <code>sessionStorage</code> <code>localStorage</code> 的区别：</p><ol><li>数据存储位置</li></ol><p>三者都是存储在浏览器本地</p><ol start="2"><li>生命周期</li></ol><p>cookie的过期时间是服务端在写入的时候就设置好的</p><p>localStorage是写入就一直存在，除非手动清除</p><p>sessionStorage是页面关闭的时候就清除</p><ol start="3"><li>存储大小</li></ol><p>cookie 大小一般是4K</p><p>sessionStorage 和 localStorage 存储空间比较大， 约为5M</p><ol start="4"><li>写入方式</li></ol><p>cookie 由服务端写入</p><p>sessionStorage 和 localStorage 由前端写入</p><ol start="5"><li>数据共享</li></ol><p>三者数据共享都遵循同源策略, sessionStorage还必须限制是同一个页面</p><ol start="6"><li>发送请求时是否携带</li></ol><p>前端给后端发送请求时会自动携带cookie</p><p>sessionStorage 和 localStorage 不会</p><ol start="7"><li>应用场景</li></ol><p>cookie一般存储登录验证信息或者token</p><p>localStorage常用于存储不易变动的数据，减轻服务器压力</p><p>sessionStorage可以用来监测用户是否是刷新进入页面，如音乐播放器恢复进度条功能</p><h3 id="_2-10-websocket" tabindex="-1">2.10 WebSocket <a class="header-anchor" href="#_2-10-websocket" aria-hidden="true">#</a></h3><p>WebSocket是HTML5开始提供的一种在<code>单个TCP 连接</code>上进行<code>全双工通讯</code>的协议。</p><p>在WebSocket API中，浏览器和服务器只需要做<code>一个握手</code>的动作，然后，浏览器和服务器之间就形成了<code>一条快速通道</code>。两者之间就直接可以数据互相传送。</p><p>浏览器通过 JavaScript 向服务器发出建立 WebSocket 连接的请求，连接建立以后，客户端和服务器端就可以通过 TCP 连接直接交换数据。</p><p>当你获取 Web Socket 连接后，你可以通过 <code>send()</code> 方法来向服务器发送数据，并通过 <code>onmessage</code> 事件来接收服务器返回的数据。</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">WebSocket</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">WebSocket</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">in</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">window</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ws</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">WebSocket</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ws://localhost:9988/echo</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">ws</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">open</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#A6ACCD;">ws</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">send</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">发送数据</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">ws</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">onmessage</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">evt</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">receive_msg</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">evt</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">data</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#82AAFF;">alert</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">数据已接受</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">ws</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">onclose</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#82AAFF;">alert</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">连接已关闭</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">alert</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">您的浏览器不支持WebSocket!</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div>`,103),e=[p];function t(c,r,F,y,D,d){return n(),a("div",null,e)}const A=s(o,[["render",t]]);export{C as __pageData,A as default};
